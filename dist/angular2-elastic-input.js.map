{"version":3,"file":"angular2-elastic-input.js","sources":["ts/angular2-elastic-input.ts","ts/src/elastic-input.module.ts","ts/src/elastic-input.directive.ts"],"sourcesContent":["/**\n * Generated bundle index. Do not edit.\n */\n\nexport {ElasticInputModule} from './index';\n\nexport {ElasticInputDirective as Éµa} from './src/elastic-input.directive';","import {NgModule, ModuleWithProviders} from '@angular/core';\nimport {ElasticInputDirective} from './elastic-input.directive';\nexport class ElasticInputModule {\n/**\n * @return {?}\n */\nstatic forRoot (): ModuleWithProviders {\n    return {\n      ngModule: ElasticInputModule\n    };\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  declarations: [ElasticInputDirective],\n  exports: [ElasticInputDirective]\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction ElasticInputModule_tsickle_Closure_declarations() {\n/** @type {?} */\nElasticInputModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nElasticInputModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { ElementRef, HostListener, Directive, OnInit } from '@angular/core';\nexport class ElasticInputDirective implements OnInit {\n  wrapper: HTMLElement;\n  mirror: HTMLElement;\n  content: any;\n/**\n * @return {?}\n */\nonInput(): void {\n    this.update();\n  }\n/**\n * @param {?} element\n */\nconstructor(private element: ElementRef) {}\n/**\n * @return {?}\n */\nngOnInit(): void {\n    this.wrapper = document.createElement('div');\n    this.wrapper.style.position = 'fixed';\n    this.wrapper.style.top = '-999px';\n    this.wrapper.style.left = '0';\n    document.body.appendChild(this.wrapper);\n\n    this.mirror = document.createElement('span');\n    this.mirror.style.whiteSpace = 'pre';\n\n    this.setMirrorStyle(this.mirror, this.element.nativeElement);\n\n    this.wrapper.appendChild(this.mirror);\n\n    this.update();\n  }\n/**\n * @return {?}\n */\nngAfterContentChecked(): void {\n    this.update();\n  }\n/**\n * @return {?}\n */\nngAfterViewChecked(): void {\n    this.update();\n  }\n/**\n * @return {?}\n */\nngOnDestroy(): void {\n    this.mirror.remove();\n    this.wrapper.remove();\n  }\n/**\n * @param {?} mirror\n * @param {?} element\n * @return {?}\n */\nsetMirrorStyle(mirror: HTMLElement, element: HTMLElement) {\n    const /** @type {?} */ style = window.getComputedStyle(element);\n\n    [\n      'fontFamily',\n      'fontSize',\n      'fontWeight',\n      'fontStyle',\n      'letterSpacing',\n      'textTransform',\n      'wordSpacing'\n    ].forEach(value => {\n      mirror.style[value] = style[value];\n    });\n\n    mirror.style.paddingLeft = style.textIndent;\n\n    if (style.boxSizing === 'border-box') {\n      [\n        'paddingLeft',\n        'paddingRight',\n        'borderLeftStyle',\n        'borderLeftWidth',\n        'borderRightStyle',\n        'borderRightWidth'\n      ].forEach(value => {\n        mirror.style[value] = style[value];\n      });\n    } else if (style.boxSizing === 'padding-box') {\n      ['paddingLeft', 'paddingRight'].forEach(value => {\n        mirror.style[value] = style[value];\n      });\n    }\n  }\n/**\n * @return {?}\n */\nupdate() {\n    const /** @type {?} */ domEl = this.element.nativeElement;\n    const /** @type {?} */ value = domEl.value || domEl.placeholder;\n    if (this.content != value) {\n      this.content = value;\n    } else {\n      return;\n    }\n    this.mirror.innerText = value;\n    const /** @type {?} */ delta = 1;\n    domEl.style.width = `${this.mirror.offsetWidth + delta}px`;\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\n  selector: 'input[elastic-input]'\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'onInput': [{ type: HostListener, args: ['input', ['$event.target'], ] },],\n};\n}\n\nfunction ElasticInputDirective_tsickle_Closure_declarations() {\n/** @type {?} */\nElasticInputDirective.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nElasticInputDirective.ctorParameters;\n/** @type {?} */\nElasticInputDirective.propDecorators;\n/** @type {?} */\nElasticInputDirective.prototype.wrapper;\n/** @type {?} */\nElasticInputDirective.prototype.mirror;\n/** @type {?} */\nElasticInputDirective.prototype.content;\n/** @type {?} */\nElasticInputDirective.prototype.element;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"],"names":[],"mappings":"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"}
